---
title: droonga-add
layout: ja
---

{% comment %}
##############################################
  THIS FILE IS AUTOMATICALLY GENERATED FROM
  "_po/ja/reference/1.1.0/command-line-tools/droonga-add/index.po"
  DO NOT EDIT THIS FILE MANUALLY!
##############################################
{% endcomment %}


* TOC
{:toc}

## 概要 {#abstract}

`droonga-add`は、Droongaクラスタ内の指定されたテーブルについて、新しいレコードの追加および既存レコードの更新を行います。

例えば、`192.168.100.50`というDroongaノードがあり、同一ネットワークセグメント内のコンピュータ`192.168.100.10`にログインしている場合、クラスタ内の`User`テーブルにレコードを1つ追加するコマンド列は以下のようになります：

~~~
(on 192.168.100.10)
$ droonga-add --host 192.168.100.50 --receiver-host 192.168.100.10 \
    --table User --key id1 --name Adam --age 20
Adding new record...
{
  "table": "Store",
  "key": "id1",
  "values": {
    "name": "Adam",
    "age": "20"
  }
}
Done.
~~~

このコマンドは、typeが[`add`](../../commands/add/)であるメッセージを[`droonga-request`](../droonga-request/)を用いて送信する操作を簡単に行う物です。
上記コマンド列によってもたらされる結果は、以下のコマンド列の結果と完全に同一です:

~~~
(on 192.168.100.10)
$ echo '{"type":"add","body":{"key":"id1","values":{"name":"Adam","age":20}}}' |
    droonga-request --report-reqest --host 192.168.100.50 --receiver-host 192.168.100.10
Request: {
  "type": "add",
  "body": {
    "table": "Store",
    "key": "id1",
    "values": {
      "name": "Adam",
      "age": "20"
    }
  },
  "dataset": "Default"
}
Elapsed time: 0.023309135
{
  "inReplyTo": "1430961788.4171028",
  "statusCode": 200,
  "type": "add.result",
  "body": true
}
~~~

[`add`コマンドのリファレンス](../../commands/add/)も併せて参照して下さい。

## パラメータ {#parameters}

`--table=TABLE` *(必須)*
: レコードを追加するテーブルの名前。

`--key=KEY`
: 追加または更新するレコードの一意なキー。

`--(COLUMN NAME)=(VALUE)`, `--value:(COLUMN NAME)=(VALUE)`
: レコードのカラムの値。
  `host`のように既存の他のパラメータと同じ名前のカラムの値を指定する場合は、`--value:`という接頭辞を付ける必要があります。

`--host=NAME`
: メッセージの送信先となるEngineノードのホスト名。
  既定値は、コマンドを実行しているコンピュータ自身の推測されたホスト名です。

`--port=PORT`
: Engineノードとの通信に使うポート番号。
  既定値は`10031`です。

`--tag=TAG`
: Engineノードとの通信に使うタグ名。
  既定値は`droonga`です。

`--dataset=NAME`
: メッセージの送信先データセット名。
  既定値は`Default`です。

`--receiver-host=NAME`
: このコマンドを実行しているコンピュータのホスト名。
  既定値は、そのコンピュータのホスト名として推測される名前です。

`--target-role=ROLE`
: メッセージを処理できるEngineノードのロール。
  以下のいずれかを指定します:
  
  * `service-provider`:
    メッセージは、クラスタ内でサービスを提供中のノードで処理されます。
    データ抽出操作に関わるノードには、後から遅れてメッセージが伝搬します。
  * `absorb-source`:
    メッセージは、クラスタへのノード追加操作におけるデータコピー元となっているノードで処理されます。
    サービスを提供中のノード、並びにデータコピー先となっているノードへは、メッセージは伝搬しません。
  * `absorb-destination`:
    メッセージは、クラスタへのノード追加操作におけるデータコピー先となっているノードで処理されます。
    サービスを提供中のノード、並びにデータコピー元となっているノードへは、メッセージは伝搬しません。
  * `any`:
    メッセージは、`--host`で指定されたノードで処理されます。
  
  既定値は`any`です。

`--timeout=SECONDS`
: 応答がない接続を打ち切るまでの待ち時間（単位：秒）です。
  既定値は`3`です。

`-h`, `--help`
: コマンドの使い方の説明を表示します。


## インストール方法 {#install}

このコマンドは、Rubygemsのパッケージ`droonga-client`の一部としてインストールされます。

~~~
# gem install droonga-client
~~~

