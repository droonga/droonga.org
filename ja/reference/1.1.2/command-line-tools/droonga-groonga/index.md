---
title: droonga-groonga
layout: ja
---

{% comment %}
##############################################
  THIS FILE IS AUTOMATICALLY GENERATED FROM
  "_po/ja/reference/1.1.2/command-line-tools/droonga-groonga/index.po"
  DO NOT EDIT THIS FILE MANUALLY!
##############################################
{% endcomment %}


* TOC
{:toc}

## 概要 {#abstract}

`droonga-groonga`は、Droongaクラスタに対してコマンドラインインターフェース経由でGroongaサーバのように通信する機能を提供します。

例えば、`192.168.100.50`というDroonga Engineノードがあり、同一ネットワークセグメント内のコンピュータ`192.168.100.10`にログインしている場合、全てのテーブルの一覧を出力するコマンド列は以下のようになります：

~~~
(on 192.168.100.10)
$ droonga-groonga --host 192.168.100.50 --receiver-host 192.168.100.10 --pretty \
    table_list
[
  [
    0,
    1431000097.1314175,
    0.00024175643920898438
  ],
  [
    [
      [
        "id",
        "UInt32"
      ],
      [
        "name",
        "ShortText"
  ...
  ]
]
~~~

このコマンドは、Groonga互換コマンドのメッセージを[`droonga-request`](../droonga-request/)を用いて送信する操作を簡単に行う物です。
上記コマンド列によってもたらされる結果は、以下のコマンド列の結果と実質的に同一です:

~~~
(on 192.168.100.10)
$ echo '{"type":"table_list"}' |
    droonga-request --report-request --host 192.168.100.50 --receiver-host 192.168.100.10
Request: {
  "type": "table_list",
  "id": "1431000097.1242323",
  "date": "2015-05-07T12:01:37.124254Z",
  "dataset": "Default"
}
Elapsed time: 0.011710191
{
  "inReplyTo": "1431000097.1242323",
  "statusCode": 200,
  "type": "table_list.result",
  "body": [
    [
      0,
      1431000097.1314175,
      0.00024175643920898438
    ],
    [
      [
        [
          "id",
          "UInt32"
        ],
        [
          "name",
          "ShortText"
    ...
    ]
  ]
}
~~~

[Groonga互換コマンドのリファレンス](../../commands/)、および[Groongaのリファレンスマニュアル](http://groonga.org/ja/docs/reference/command.html)も併せて参照して下さい。

## `groonga`コマンドとの互換性 {#compatibility}

このコマンドは[`groonga`コマンドのクライアントモードおよびスタンドアロンモード](http://groonga.org/ja/docs/reference/executables/groonga.html)のように動作するよう設計されています。
このコマンドに与えられた、Droonga固有のオプションを除いた残りの全てのコマンドライン引数は、`groonga`コマンドのコマンドライン引数と同様に動作します。
例：

~~~
(on 192.168.100.10)
$ GROONGA="droonga-groonga --host 192.168.100.50 --receiver-host 192.168.100.10 --pretty "
$ $GROONGA table_list
$ $GROONGA column_list --table Store
$ $GROONGA select --table Store --match_columns name --query ave --limit 5 --output_columns _key,name
~~~

ただし、現在の所`groonga`コマンドの以下の機能にはまだ対応していません：

 * 標準入力経由での複数コマンドの実行
 * コマンドライン引数の後続行によって与えられる`load`コマンドのための値
 * Droongaが対応していないGroongaの機能


## パラメータ {#parameters}

Groonga風のコマンドライン引数と以下のDroonga固有のオプションが利用できます。

`--pretty`
: 結果をpretty print形式のJSONで出力します。

`--host=NAME`
: メッセージの送信先となるEngineノードのホスト名。
  既定値は、コマンドを実行しているコンピュータ自身の推測されたホスト名です。

`--port=PORT`
: Engineノードとの通信に使うポート番号。
  既定値は`10031`です。

`--tag=TAG`
: Engineノードとの通信に使うタグ名。
  既定値は`droonga`です。

`--dataset=NAME`
: メッセージの送信先データセット名。
  既定値は`Default`です。

`--receiver-host=NAME`
: このコマンドを実行しているコンピュータのホスト名。
  既定値は、そのコンピュータのホスト名として推測される名前です。

`--target-role=ROLE`
: メッセージを処理できるEngineノードのロール。
  以下のいずれかを指定します:
  
  * `service-provider`:
    メッセージは、クラスタ内でサービスを提供中のノードで処理されます。
    データ抽出操作に関わるノードには、後から遅れてメッセージが伝搬します。
  * `absorb-source`:
    メッセージは、クラスタへのノード追加操作におけるデータコピー元となっているノードで処理されます。
    サービスを提供中のノード、並びにデータコピー先となっているノードへは、メッセージは伝搬しません。
  * `absorb-destination`:
    メッセージは、クラスタへのノード追加操作におけるデータコピー先となっているノードで処理されます。
    サービスを提供中のノード、並びにデータコピー元となっているノードへは、メッセージは伝搬しません。
  * `any`:
    メッセージは、`--host`で指定されたノードで処理されます。
  
  既定値は`any`です。

`--timeout=SECONDS`
: 応答がない接続を打ち切るまでの待ち時間（単位：秒）です。
  既定値は`3`です。

`-h`, `--help`
: コマンドの使い方の説明を表示します。


## インストール方法 {#install}

このコマンドは、Rubygemsのパッケージ`droonga-client`の一部としてインストールされます。

~~~
# gem install droonga-client
~~~

