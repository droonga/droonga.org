---
title: droonga-engine-configure
layout: ja
---

{% comment %}
##############################################
  THIS FILE IS AUTOMATICALLY GENERATED FROM
  "_po/ja/reference/1.1.2/command-line-tools/droonga-engine-configure/index.po"
  DO NOT EDIT THIS FILE MANUALLY!
##############################################
{% endcomment %}


* TOC
{:toc}

## 概要 {#abstract}

`droonga-engine-configure`は、そのコンピュータ自身を`droonga-engine`のノードとして設定します。

このコマンドの最も代表的な用途は、[`droonga-engine-join`コマンド](../droonga-engine-join/)で管理しやすいように、コンピュータをクリーンで空の状態のDroonga Engineノードとしてリセットする事です。

このコマンドはコンピュータをどのように設定するかを対話的に尋ねてきます：

~~~
# droonga-engine-configure
The droonga-engine service is now running.
Before reconfiguration, the service is going to be stopped and this node will be unjoined from the cluster.
Are you sure you want to continue reconfiguration? (y/N): y
Do you want all data to be cleared? (y/N): y
Do you want the configuration file "droonga-engine.yaml" to be regenerated? (y/N): y
Do you want the file "catalog.json" to be regenerated? (y/N): y
host [192.168.100.50]: 
port [10031]: 
tag [droonga]: 
log level (trace,debug,info,warn,error,fatal) [warn]: 
~~~

プランが既に固まっているのであれば、コマンドラインオプションを使ってサイレントに実行する事もできます：

~~~
# droonga-engine-configure \
    --no-prompt \
    --clear \
    --reset-config \
    --reset-catalog \
    --host nodeX \
    --port 20032 \
    --tag droonga \
    --log-level info
~~~

`droonga-engine`サービスがサービスとして正しく設定されている場合、このコマンドはインストール済みのサービスを設定するためだけに動作し、（サービスの利用においては使われない）いくつかのオプションは無視されます。


## パラメータ {#parameters}

`--no-prompt`
: 対話的な入力プロンプトを表示しない。
  このオプションが指定された場合、以下のオプションで指定されなかった設定項目は全て既定の値で埋められます。
  オプションが指定されない場合、以下の各項目に対応する設問が表示されます。

`--clear`
: `droonga-engine`サービスのデータディレクトリにある全てのデータを消去します。

`--reset-config`
: 既存の`droonga-engine.yaml`を新しい物に置き換えます。
  このオプションが指定された場合、`droonga-engine.yaml`は確認無しに上書きされます。
  オプションが指定されず、既存の`droonga-engine.yaml`が存在する場合、上書きして良いかどうかが尋ねられます。

`--reset-catalog`
: 既存の`catalog.json`を、孤立した単一のEngineノードのみを含む内容の新しい物に置き換えます。
  このオプションが指定された場合、`catalog.json`は確認無しに上書きされます。
  オプションが指定されず、既存の`catalog.json`が存在する場合、上書きして良いかどうかが尋ねられます。

`--host=NAME`
: Engineノード自身のホスト名。
  既定値は、コマンドを実行しているコンピュータ自身の推測されたホスト名です。

`--port=PORT`
: クライアントや他のノードからの接続を待ち受けるポートの番号。
  既定値は`10031`です。

`--tag=TAG`
: 入力メッセージとして受け付けるタグ名。
  既定値は`droonga`です。

`--internal-connection-lifetime=SECONDS`
: 内部的な接続において、応答のないメッセージの処理を打ち切るまでの待ち時間（単位：秒）。
  既定値は`60`です。

`--log-level=LEVEL`
: ロガー用のログレベル。
  取り得る値は`trace`、`debug`、`info`、`warn`、`error`、`fatal`のうちのいずれかです。
  既定値は`warn`です。

`--log-file=PATH`
: ログメッセージの出力先ファイルのパス。
  このオプションが指定されなかった場合、ログは標準出力に出力されます。

`--daemon`, `--no-daemon`
: デーモンとして実行するか、通常のプロセスとして実行するか。
  ただし、`service droonga-engine start`コマンドで開始されるサービスについては常にデーモンとして実行されます。

`--pid-file=PATH`
: デーモンとして実行されたプロセスのプロセスIDの出力先ファイルのパス。
  ただし、`service droonga-engine start`コマンドで開始されるサービスについては、プロセスIDは常にプラットフォームごとの適切な位置に出力されます。

`--base-dir=PATH`
: すべての`droonga-engine`関係のファイルが格納されるデータディレクトリのパス。
  ただし、`service droonga-engine start`コマンドで開始されるサービスについては、必ず`/home/droonga-engine/droonga/`が使われます。

## インストール方法 {#install}

このコマンドは、Rubygemsのパッケージ`droonga-engine`の一部としてインストールされます。

~~~
# gem install droonga-engine
~~~

