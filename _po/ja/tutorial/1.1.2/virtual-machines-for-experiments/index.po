msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"PO-Revision-Date: 2015-11-15 23:28+0900\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

msgid ""
"---\n"
"title: \"Droonga tutorial: How to prepare virtual machines for experiments?\"\n"
"layout: en\n"
"---"
msgstr ""
"---\n"
"title: \"Droongaチュートリアル: 実験用の仮想マシンを用意する手順\"\n"
"layout: ja\n"
"---"

msgid ""
"* TOC\n"
"{:toc}"
msgstr ""

msgid "## The goal of this tutorial"
msgstr "## チュートリアルのゴール"

msgid "Learning steps to prepare multiple (three) virtual machines for experiments."
msgstr "実験用に複数（3台）の仮想マシンを用意する手順を学ぶこと。"

msgid "## Why virtual machines?"
msgstr "## なぜ仮想マシンが必要なのか？"

msgid ""
"Because Droonga is a distributed data processing system, you have to prepare m"
"ultiple computers to construct a cluster.\n"
"For safety (and good performance) you should use dedicated computers for Droon"
"ga nodes."
msgstr ""
"Droongaは分散型のデータ処理システムなので、クラスタを構成するには複数の台のコンピュータを用意する必要があります。\n"
"安全のためにも（そしてより良い性能を得るためにも）、Droongaノードにはそれ用のコンピュータを用意することが望ましいです。"

msgid ""
"You need two or more computers for effective replication.\n"
"If you are trying to manage node structure of your cluster effectively, three "
"or more computers are required."
msgstr ""
"有効なレプリケーションのためには、2台以上のコンピュータが必要です。\n"
"また、クラスタ構成の管理を試してみるには、3台以上のコンピュータが必要となります。"

msgid ""
"However, it may cost money that using multiple server instances on virtual pri"
"vate server services, even if you just want to do testing or development.\n"
"So we recommend you to use private virtual machines on your own PC for such ca"
"ses."
msgstr ""
"しかしながら、仮に、単に検証や開発をしたい場合でも、複数の仮想マシンのインスタンスをVPSサービスで利用するにはお金がかかります。\n"
"そのような用途では、あなたの手持ちのコンピュータ上でプライベートな仮想マシンを使うのがおすすめです。"

msgid ""
"Luckly, there is a useful software [Vagrant][] to manage virtual machines easi"
"ly.\n"
"This tutorial describes *how to prepare three virtual machines* by Vagrant."
msgstr ""
"幸いなことに、[Vagrant][]を使うと仮想マシンを簡単に管理することができます。\n"
"このチュートリアルでは、Vagrantを使って*3台の仮想マシンを用意する手順*を解説します。"

msgid "## Prepare a host machine"
msgstr "## ホストマシンを用意する"

msgid ""
"First, you have to prepare a PC as the host of VMs.\n"
"Because each VM possibly requires much size RAM for building of native extensi"
"ons, the host machine should have much more RAM - hopefully, 8GB or larger."
msgstr ""
"まず最初に、仮想マシンのホストとなるPCを用意する必要があります。\n"
"仮想マシンは多くのRAMを要求する場合があるため、ホストマシンにはできれば8GB以上のメモリがあることが望ましいです。"

msgid ""
"In most cases you don't have to prepare much size RAM for each VM because ther"
"e are pre-built binaries for major platforms.\n"
"However, if your VM is running with a minor distribution or an edge version, t"
"here may be no binary package for your platform. Then it will be compiled auto"
"matically, requiring 2GB RAM.\n"
"If you see any strange error while building native extensions, enlarge the siz"
"e of RAM of each VM and try installation again.\n"
"(See also the [appendix of this tutorial](#less-size-memory).)"
msgstr ""
"多くの場合、メジャーなプラットフォーム向けにはビルド済みのバイナリが使われるため、それほど多くのRAMは必要ではありません。\n"
"しかしながら、仮想マシン上で動作する環境がマイナーなディストリビューションであったり、そのディストリビューションの最新のバージョンであった場合には、その環境"
"向けのビルド済みバイナリが用意されていないことがあり得ます。そのような場合、バイナリは自動的にコンパイルされますが、その際に2GB程度のメモリが要求されます"
"。\n"
"ネイティブ拡張のビルド時に奇妙なエラーに遭遇した場合は、仮想マシンのメモリの割り当て量を増やして再度インストールを行って下さい。\n"
"（[このチュートリアルの付録も参照して下さい](#less-size-memory)。）"

msgid "## Steps to prepare VMs"
msgstr "## 仮想マシンを用意する手順"

msgid "### Install the VirtualBox"
msgstr "### VirtualBoxをインストールする"

msgid ""
"The Vagrant requires a backend to run VMs, so you have to install the most rec"
"ommended one: [VirtualBox][].\n"
"For example, if you use an [Ubuntu][] PC, it can be installed via the `apt` co"
"mmand, like:"
msgstr ""
"Vagrantには、仮想マシンを実行するためのバックエンドが必要です。ここでは推奨環境の[VirtualBox][]をインストールすることにします。\n"
"例えば、ホストマシンが[Ubuntu][]で動作するPCなのであれば、VirtualBoxは以下のように`apt`コマンドでインストールできます:"

msgid ""
"~~~\n"
"$ sudo apt-get install virtualbox\n"
"~~~"
msgstr ""

msgid ""
"Otherwise go to the [VirtualBox web site][VirtualBox] and install it as instru"
"cted."
msgstr "その他の環境では、[VirtualBoxのWebサイト][VirtualBox]にある手順に従ってVirtualBoxをインストールして下さい。"

msgid "### Install the Vagrant"
msgstr "### Vagrantをインストールする"

msgid ""
"Next, install [Vagrant][].\n"
"Go to the [Vagrant web site][Vagrant] and install it as instructed.\n"
"For example, if you use an Ubuntu PC (x64):"
msgstr ""
"次に、[Vagrant][]をインストールします。[VagrantのWebサイト][Vagrant]にある手順に従って、Vagrantをインストールして下さ"
"い。\n"
"例えば、ホストマシンがx64のUbuntu　PCなのであれば、以下の要領です:"

msgid ""
"~~~\n"
"$ wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.6.5_x86_64.deb\n"
"$ sudo dpkg -i vagrant_1.6.5_x86_64.deb\n"
"~~~"
msgstr ""

msgid ""
"NOTE: You can install Vagrant via `apt-get install vagrant` on Ubuntu 15.10, b"
"ut don't use it because the version is too old to import boxes from [Vagrant C"
"loud][]."
msgstr ""
"注意: Ubuntu 15.10では`apt-get install vagrant`でもVagrantをインストールできますが、これは使わないで下さい。こ"
"の方法でインストールできるVagrantはバージョンが古いため、[Vagrant Cloud][]からboxをインポートできません。"

msgid "### Determine a box and prepare a Vagrantfile"
msgstr "### boxの種類を決めて、Vagrantfileを用意する"

msgid ""
"Go to the [Vagrant Cloud][] and find a box for your experiments.\n"
"For example, if you use a [box for Ubuntu Wily (x64)](https://vagrantcloud.com"
"/ubuntu/boxes/wily64), you just have to do:"
msgstr ""
"[Vagrant Cloud][]のサイトから、実験に使うためのboxを選びます。\n"
"例えば[Ubuntu Wily (x64)のbox](https://vagrantcloud.com/ubuntu/boxes/trusty64)を使うの"
"であれば、以下のようにします:"

msgid ""
"~~~\n"
"$ mkdir droonga-ubuntu-wily\n"
"$ cd droonga-ubuntu-wily\n"
"$ vagrant init ubuntu/wily64\n"
"~~~"
msgstr ""

msgid ""
"Then a file `Vagrantfile` is automatically generated there.\n"
"However you should rewrite it completely for experiments of Droonga cluster, l"
"ike following:"
msgstr ""
"この操作で、設定ファイルの`Vagrantfile`が自動生成されます。\n"
"しかし、このファイルはDroongaクラスタの実験のために、以下のように完全に書き換えてしまいます:"

msgid "`Vagrantfile`:"
msgstr ""

msgid ""
"~~~\n"
"n_machines = 3\n"
"box        = \"ubuntu/wily64\""
msgstr ""

msgid ""
"VAGRANTFILE_API_VERSION = \"2\"\n"
"Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n"
"  n_machines.times do |index|\n"
"    config.vm.define :\"node#{index}\" do |node_config|\n"
"      node_config.vm.box = box\n"
"      node_config.vm.network(:private_network,\n"
"                             :ip => \"192.168.100.#{50 + index}\")\n"
"      node_config.vm.host_name = \"node#{index}\"\n"
"      node_config.vm.provider(\"virtualbox\") do |virtual_box|\n"
"        virtual_box.memory = 2048\n"
"      end\n"
"    end\n"
"  end\n"
"end\n"
"~~~"
msgstr ""

msgid ""
"Note, this `Vagrantfile` defines three VMs with 2GB (2048MB) RAM for each.\n"
"So your host machine must have 6GB or more RAM.\n"
"If your machine has less RAM, set the size to `512` (meaning 512MB) for now."
msgstr ""
"注：この`Vagrantfile`では、3つの仮想マシンを2GB（2048MB）のメモリを伴って定義しています。\n"
"ですので、ホストマシンは6GB以上のメモリを搭載している必要があります。\n"
"もしホストマシンのメモリがそこまで多くないのであれば、この時点では`512`（512MB）などの適当な値を設定しておいて下さい。"

msgid "### Start virtual machines"
msgstr "### 仮想マシンを起動する"

msgid "To start VMs, you just run the command `vagrant up`:"
msgstr "仮想マシンは、`vagrant up`というコマンドで起動できます:"

msgid ""
"~~~\n"
"$ vagrant up\n"
"Bringing machine 'node0' up with 'virtualbox' provider...\n"
"Bringing machine 'node1' up with 'virtualbox' provider...\n"
"Bringing machine 'node2' up with 'virtualbox' provider...\n"
"...\n"
"~~~"
msgstr ""

msgid ""
"Then Vagrant automatically downloads VM image from the [Vagrant Cloud][] web s"
"ite and starts VMs.\n"
"After preparation processes, there are three running VMs with IP address in a "
"virtual private network: `192.168.100.50`, `192.168.100.51`, and `192.168.100."
"52`."
msgstr ""
"これにより、Vagrantは自動的に仮想マシンのイメージを[Vagrant Cloud][]のWebサイトからダウンロードし、それが終わり次第仮想マシンを起"
"動します。\n"
"用意が完了すると、仮想ネットワーク上のIPアドレスとして`192.168.100.50`、`192.168.100.51`、`192.168.100.52`"
"をそれぞれ持つ3台の仮想マシンが動作している状態になります。"

msgid ""
"Let's confirm that they are correctly working.\n"
"You can log in those VMs by the command `vagrant ssh`, like:"
msgstr ""
"仮想マシンが正しく動いていることを確認しましょう。\n"
"仮想マシンには`vagrant ssh`コマンドを使って以下のようにログインできます:"

msgid ""
"~~~\n"
"$ vagrant ssh node0\n"
"Welcome to Ubuntu 15.10 (GNU/Linux 4.2.0-23-generic x86_64)\n"
"...\n"
"vagrant@node0:~$ exit\n"
"~~~"
msgstr ""

msgid "### Register your VMs to your SSH client"
msgstr "### 仮想マシンをSSHクライアントに登録する"

msgid ""
"You have to use `vagrant ssh` instead of regular `ssh`, to log in VMs.\n"
"Moreover you have to `cd` to the `Vagrantfile`'s directory before running the "
"command.\n"
"It is annoying a little."
msgstr ""
"仮想マシンにログインするためには、通常の`ssh`コマンドではなく、`vagrant ssh`コマンドを使わなくてはなりません。\n"
"また、その前には`Vagrantfile`があるディレクトリに`cd`する必要もあります。\n"
"これは少々面倒です。"

msgid "So, let's register VMs to your local config file of the SSH client, like:"
msgstr "ですので、SSHクライアントのローカル設定ファイルに、以下のようにして仮想マシンのための設定を追加しておきましょう:"

msgid ""
"~~~\n"
"$ vagrant ssh-config node0 >> ~/.ssh/config\n"
"$ vagrant ssh-config node1 >> ~/.ssh/config\n"
"$ vagrant ssh-config node2 >> ~/.ssh/config\n"
"~~~"
msgstr ""

msgid ""
"After that you can log in to your VMs from the host computer by their name, wi"
"thout `vagrant ssh` command:"
msgstr "これで、`vagrant ssh`コマンドを使わずとも、仮想マシンの名前を指定してログインできるようになります:"

msgid ""
"~~~\n"
"$ ssh node0\n"
"~~~"
msgstr ""

msgid "### Configure your VMs to access each other by their host name"
msgstr "### 仮想マシン同士で互いのホスト名を名前解決できるように設定する"

msgid ""
"Because there is no name server, each VM cannot resolve host names of others.\n"
"So you have to type their raw IP addresses for now.\n"
"It's very annoying."
msgstr ""
"ネームサーバがないので、各仮想マシンはお互いのホスト名を名前解決する事ができません。\n"
"そのため、現時点ではそれぞれのIPアドレスを直接書く必要があります。\n"
"これは非常に面倒です。"

msgid "So, let's modify hosts file on VMs, like:"
msgstr "なので、各仮想マシンのhostsファイルを以下のように編集しておきましょう:"

msgid "`/etc/hosts`:"
msgstr ""

msgid ""
"~~~\n"
"127.0.0.1 localhost\n"
"192.168.100.50 node0\n"
"192.168.100.51 node1\n"
"192.168.100.52 node2\n"
"~~~"
msgstr ""

msgid "After that your VMs can communicate with each other by their host name."
msgstr "これで、各マシンはお互いにホスト名を指定して通信できるようになります。"

msgid "### Shutdown VMs"
msgstr "### 仮想マシンの終了"

msgid "You can shutdown all VMs by the command `vagrant halt`:"
msgstr "仮想マシンは、`vagrant halt`コマンドでまとめて終了できます:"

msgid ""
"~~~\n"
"$ vagrant halt\n"
"~~~"
msgstr ""

msgid "Then Vagrant shuts down all VMs completely."
msgstr "これで、Vagrantがすべての仮想マシンを完全に終了させてくれます。"

msgid "### Cleanup VMs"
msgstr "### 仮想マシンで行った変更を取り消す"

msgid ""
"If you want to clear all changes in VMs, then simply run the command `vagrant "
"destroy -f`:"
msgstr "仮想マシンの中で行ったすべての変更を取り消したい場合は、単純に`vagrant destroy -f`というコマンドを実行すればOKです:"

msgid ""
"~~~\n"
"$ vagrant destroy -f\n"
"$ vagrant up\n"
"~~~"
msgstr ""

msgid ""
"Then all changes will go away and you can start fresh VMs again.\n"
"This will help you to improve installation scripts or something."
msgstr ""
"これで、すべての変更を取り消して、仮想マシンをまっさらの状態で起動し直すことができます。\n"
"この方法はインストールスクリプトの改修などの作業をする時に便利でしょう。"

msgid "### Appendix: if your host machine has less size RAM... {#less-size-memory}"
msgstr "### 付録: ホストマシンのRAMがそれほど多くない場合 {#less-size-memory}"

msgid "Even if your computer has less size RAM, you don't have to give up."
msgstr "手持ちのコンピュータが十分なサイズのメモリを搭載していないとしても、諦める必要はありません。"

msgid ""
"2GB RAM for each virtual machine is required just for building native extensio"
"ns of [Rroonga][].\n"
"In other words, Droonga nodes can work with less size RAM, if there are existi"
"ng (already built) binary libraries."
msgstr ""
"各仮想マシンに2GBのメモリが必要になるのは、[Rroonga][]のネイティブ拡張をビルドする必要があるからです。\n"
"言い換えると、既にビルド済みのバイナリがあるのであれば、Droongaノードはそこまでのメモリがなくても動作します。"

msgid "So you can install Droonga services for each VM step by step, like:"
msgstr "ですので、以下のようにすると、各仮想マシンに順番にDroongaのサービスをインストールしていくことができます:"

msgid ""
" 1. Shutdown all VMs by `vagrant halt`.\n"
" 2. Open the VirtualBox console by `virtualbox`.\n"
" 3. Go to `properties` of a VM, and enlarge the size of RAM to 2GB (2048MB).\n"
" 4. Start the VM, from the VirtualBox console.\n"
" 5. Log in to the VM and install Droonga services.\n"
" 6. Shutdown the VM.\n"
" 7. Go to `properties` of the VM, and decrease the size of RAM to the original"
" size.\n"
" 8. Repeat steps from 3 to 7 for each VM."
msgstr ""
" 1. `vagrant halt`ですべての仮想マシンを終了する。\n"
" 2. `virtualbox`でVirtualBoxのコンソールを開く。\n"
" 3. 1台の仮想マシンのプロパティを開き、メモリの大きさを2GB（2048MB）に設定し直す。\n"
" 4. VirtualBoxのコンソールからその仮想マシンを起動する。\n"
" 5. 仮想マシンにログインし、Droongaのサービスをインストールする。\n"
" 6. 仮想マシンを終了する。\n"
" 7. 仮想マシンのプロパティを開き、メモリの大きさを元に戻す。\n"
" 8. 3から7の手順を他の仮想マシンにも繰り返す。"

msgid "### Appendix: direct access to services running on a VM, from other computers"
msgstr "### 付録: 他のコンピュータから仮想マシン上のサービスに直接アクセスする"

msgid ""
"If the host machine is just a (remote) server and you are mainly using another"
" local PC, then you may hope to access HTTP servers running on VMs from your P"
"C directly.\n"
"For example, testing the administration page on an web browser (Google Chrome,"
" Mozilla Firefox, and so on.)"
msgstr ""
"ホストマシンが（リモートにある）サーバで、あなたが主に手元の別のPCを操作している状況において、仮想マシン内で動作しているHTTPサーバに手元のPCから直接"
"接続したいと思うことがあるかもしれません。\n"
"例えば、Google Chrome、Mozilla FirefoxのようなWebブラウザを使って管理ページを操作してみたい場合などです。"

msgid ""
"Port forwarding of OpenSSH will help you.\n"
"Let's run following command on your host machine."
msgstr ""
"このような場面では、OpenSSHのポートフォワーディング機能を使うと良いでしょう。\n"
"以下のコマンドをホストマシン上で実行してください。"

msgid ""
"~~~\n"
"% ssh vagrant@192.168.100.50 \\\n"
"      -i ~/.vagrant.d/insecure_private_key \\\n"
"      -g \\\n"
"      -L 20041:localhost:10041\n"
"~~~"
msgstr ""

msgid ""
"Then, actually you can see the administraton page provided by `droonga-http-se"
"rver` on the VM `node0` (`192.168.100.50`), with the URL:\n"
"`http://(IP address of hostname of the host machine):20041/`\n"
"OpenSSH client running on the host machine automatically forwards inpouring pa"
"ckets from the host machine's port `20041` to the VM's port `10041`."
msgstr ""
"これにより、仮想マシン`node0`（`192.168.100.50`）上の`droonga-http-server`が提供している管理ページに、`http"
"://(ホストマシンのIPアドレスまたはホスト名):20041/`というURLで実際にアクセスする事ができます。\n"
"この時、ホストマシン上で動作しているOpenSSHのクライアントによって、`20041`番ポートに流れ込んできたパケットはすべて仮想マシン内の`10041`"
"番ポートに転送されます。"

msgid ""
" * Don't forget to specify the username `vagrant@` and the identity file.\n"
" * The option `-g` is required to accept requests from outside of the host com"
"puter itself."
msgstr ""
" * `vagrant@` というユーザ名と認証に使う秘密鍵を指定する必要があるので注意してください。\n"
" * ホストコンピュータ自身の外から来るリクエストを受け付けるためには、`-g`オプションの指定が必要です。"

msgid "## Conclusion"
msgstr "## まとめ"

msgid "In this tutorial, you did prepare three virtual machines for Droonga nodes."
msgstr "このチュートリアルでは、Droongaノード用に3台の仮想マシンを用意する手順を学びました。"

msgid ""
"You can try [the \"getting started\" tutorial](../groonga/) and others with mult"
"iple nodes."
msgstr "これで、[「使ってみる」のチュートリアル](../groonga/)を複数ノードで実践できます。"

msgid ""
"  [Vagrant]: https://www.vagrantup.com/\n"
"  [Vagrant Cloud]: https://vagrantcloud.com/\n"
"  [VirtualBox]: https://www.virtualbox.org/\n"
"  [Groonga]: http://groonga.org/\n"
"  [Rroonga]: https://github.com/ranguba/rroonga\n"
"  [Ubuntu]: http://www.ubuntu.com/\n"
"  [Droonga]: https://droonga.org/\n"
"  [Groonga]: http://groonga.org/"
msgstr ""
